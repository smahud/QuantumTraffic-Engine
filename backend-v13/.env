# ========================================
# QuantumTraffic Engine - Global Configuration
# All services read from this file
# ========================================

# ========================================
# SERVER CONFIGURATION
# ========================================
NODE_ENV=production
DOMAIN=trafficbuster.my.id
HOSTNAME=trafficbuster.my.id

# ========================================
# PORT CONFIGURATION (All Ports Centralized)
# ========================================
PORT=5252
BACKEND_PORT=5252
FRONTEND_PORT=5252
ADMIN_PANEL_PORT=5353
RUNNER_PORT=5522

# ========================================
# SSL/TLS CERTIFICATES (Centralized Path)
# ========================================
# Use Let's Encrypt or self-signed certificates
CERT_PATH=/etc/letsencrypt/live/trafficbuster.my.id/fullchain.pem
KEY_PATH=/etc/letsencrypt/live/trafficbuster.my.id/privkey.pem

# Fallback certificates (if Let's Encrypt not available)
FALLBACK_CERT_PATH=/app/backend-v13/cert.pem
FALLBACK_KEY_PATH=/app/backend-v13/key.pem

# ========================================
# SECURITY (Global Keys)
# ========================================
JWT_SECRET=quantum-ultra-secure-jwt-secret-production-2025
RUNNER_API_KEY=quantum-runner-secure-key-production-2025
ADMIN_API_KEY=quantum-admin-api-key-production-2025

# JWT Configuration
JWT_EXP=24h

# ========================================
# WEBSOCKET CONFIGURATION (Optimized)
# ========================================
WS_USER_PATH=/ws
WS_RUNNER_PATH=/ws/runner
WS_PING_INTERVAL=15000
WS_PING_TIMEOUT=60000
WS_HEARTBEAT_INTERVAL=15000

# Session Management
SESSION_GRACE_PERIOD_MS=300000
SESSION_CLEAN_INTERVAL_MS=120000

# Runner Heartbeat
RUNNER_HEARTBEAT_INTERVAL=30000
RUNNER_TIMEOUT=120000

# ========================================
# CORS & ORIGINS (All Allowed Origins)
# ========================================
ALLOWED_ORIGINS=https://trafficbuster.my.id:5252,https://trafficbuster.my.id:5353,https://localhost:5252,https://localhost:5353

# ========================================
# DATABASE (MongoDB)
# ========================================
MONGODB_URI=mongodb://localhost:27017/quantumtraffic
MONGODB_HOST=localhost
MONGODB_PORT=27017
MONGODB_DB=quantumtraffic

# ========================================
# RATE LIMITING
# ========================================
BODY_LIMIT=32kb
LOGIN_RATE_LIMIT_WINDOW=60000
LOGIN_RATE_LIMIT_MAX=8
API_RATE_LIMIT_WINDOW=900000
API_RATE_LIMIT_MAX=1000

# ========================================
# PATHS & DIRECTORIES (Centralized)
# ========================================
APP_ROOT=/app
BACKEND_DIR=/app/backend-v13
ADMIN_DIR=/app/admin-panel
RUNNER_DIR=/app/trafficbuster-runner
LOGS_DIR=/app/logs
BACKUP_DIR=/app/backups
CERT_DIR=/app/certificates

# Data Paths
FINGERPRINTS_PATH=/app/backend-v13/data/fingerprints.json
USERS_PATH=/app/backend-v13/data/users.json

# ========================================
# LOGGING
# ========================================
LOG_LEVEL=info
LOG_FILE=/app/logs/backend.log
ADMIN_LOG_FILE=/app/logs/admin.log
VERBOSE_LOGGING=false
DEBUG=false

# ========================================
# RUNNER DEPLOYMENT
# ========================================
RUNNER_REPO_URL=https://github.com/smahud/QuantumTraffic-Engine.git
DEFAULT_RUNNER_OS=linux
RUNNER_DEPLOY_LINUX_SCRIPT=/app/deploy/setup-runner.sh
RUNNER_DEPLOY_WINDOWS_SCRIPT=/app/deploy/setup-runner.ps1

# ========================================
# BACKUP & MAINTENANCE
# ========================================
AUTO_BACKUP=true
BACKUP_INTERVAL=86400000
MAX_BACKUPS=7

# ========================================
# MONITORING & METRICS
# ========================================
ENABLE_METRICS=true
METRICS_PORT=9090
HEALTH_CHECK_INTERVAL=60000

# ========================================
# FRONTEND CONFIGURATION
# ========================================
FRONTEND_URL=https://trafficbuster.my.id:5252
BACKEND_URL=https://trafficbuster.my.id:5252

# ========================================
# ADMIN PANEL CONFIGURATION
# ========================================
ADMIN_PANEL_URL=https://trafficbuster.my.id:5353
NEXT_PUBLIC_APP_URL=https://trafficbuster.my.id:5353
NEXT_PUBLIC_BACKEND_URL=https://trafficbuster.my.id:5252
